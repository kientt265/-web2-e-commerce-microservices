datasource db {
  provider = "postgresql"
  url      = env("PAYMENT_DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

enum PaymentStatus {
  pending
  processing
  completed
  failed
  refunded
}

enum PaymentMethod {
  credit_card
  debit_card
  bank_transfer
  e_wallet
  cod
}

model Payment {
  id              Int           @id @default(autoincrement())
  order_id        Int
  amount          Decimal       @db.Decimal(10, 2)
  status          PaymentStatus @default(pending)
  payment_method  PaymentMethod
  transaction_id  String?
  payment_details Json?
  created_at      DateTime      @default(now())
  updated_at      DateTime      @updatedAt

  refunds Refund[]
}

model Refund {
  id         Int      @id @default(autoincrement())
  payment_id Int
  amount     Decimal  @db.Decimal(10, 2)
  reason     String?
  status     String   @default("pending")
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  payment Payment @relation(fields: [payment_id], references: [id])
}
