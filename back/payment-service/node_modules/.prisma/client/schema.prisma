generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("PAYMENT_DATABASE_URL")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model payments {
  id              Int       @id @default(autoincrement())
  order_id        Int
  amount          Decimal   @db.Decimal(10, 2)
  status          String    @default("pending") @db.VarChar(50)
  payment_method  String    @db.VarChar(50)
  transaction_id  String?   @db.VarChar(255)
  payment_details Json?
  created_at      DateTime? @default(now()) @db.Timestamp(6)
  updated_at      DateTime? @default(now()) @db.Timestamp(6)
  refunds         refunds[]
}

model refunds {
  id         Int       @id @default(autoincrement())
  payment_id Int
  amount     Decimal   @db.Decimal(10, 2)
  reason     String?
  status     String    @default("pending") @db.VarChar(50)
  created_at DateTime? @default(now()) @db.Timestamp(6)
  updated_at DateTime? @default(now()) @db.Timestamp(6)
  payments   payments  @relation(fields: [payment_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

enum payment_method_enum {
  credit_card
  debit_card
  bank_transfer
  e_wallet
  cod
}

enum payment_status_enum {
  pending
  processing
  completed
  failed
  refunded
}
